### Tabla Informativa

[Regresar](introduccion-consultas-basicas.md)

----

|  Acción                             | SQLAlchemy 2.0                                                                  | SQL Equivalente                                                                                                          |
| ------------------------------------- | ---------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------- |
| **Seleccionar todos los registros**   | select(Cliente)                                                                    | SELECT * FROM cliente;                                                                                                      |
| **Seleccionar columnas específicas**  | select(Cliente.nombre, Cliente.edad)                                               | SELECT nombre, edad FROM cliente;                                                                                           |
| **Filtrar resultados (WHERE)**        | select(Cliente).where(Cliente.edad > 30)                                           | SELECT * FROM cliente WHERE edad > 30;                                                                                      |
| **Filtrar con AND / OR**              | select(Cliente).where(and_(Cliente.edad > 20, Cliente.nombre == "Ana"))            | SELECT * FROM cliente WHERE edad > 20 AND nombre = 'Ana';                                                                   |
| **Ordenar resultados (ORDER BY)**     | select(Cliente).order_by(Cliente.nombre.desc())                                    | SELECT * FROM cliente ORDER BY nombre DESC;                                                                                 |
| **Limitar resultados (LIMIT)**        | select(Cliente).limit(5)                                                           | SELECT * FROM cliente LIMIT 5;                                                                                              |
| **Contar registros (COUNT)**          | select(func.count(Cliente.id))                                                     | SELECT COUNT(id) FROM cliente;                                                                                              |
| **Máximo valor (MAX)**                | select(func.max(Factura.total))                                                    | SELECT MAX(total) FROM factura;                                                                                             |
| **Mínimo valor (MIN)**                | select(func.min(Factura.total))                                                    | SELECT MIN(total) FROM factura;                                                                                             |
| **Promedio (AVG)**                    | select(func.avg(Factura.total))                                                    | SELECT AVG(total) FROM factura;                                                                                             |
| **Suma (SUM)**                        | select(func.sum(Factura.total))                                                    | SELECT SUM(total) FROM factura;                                                                                             |
| **Agrupar resultados (GROUP BY)**     | select(Cliente.nombre, func.sum(Factura.total)).join(Factura).group_by(Cliente.id) | SELECT cliente.nombre, SUM(factura.total) FROM cliente JOIN factura ON cliente.id = factura.cliente_id GROUP BY cliente.id; |
| **Join entre tablas (INNER JOIN)**    | select(Cliente, Factura).join(Factura)                                             | SELECT * FROM cliente JOIN factura ON cliente.id = factura.cliente_id;                                                      |
| **Left Join (LEFT OUTER JOIN)**       | select(Cliente, Factura).outerjoin(Factura)                                        | SELECT * FROM cliente LEFT JOIN factura ON cliente.id = factura.cliente_id;                                                 |
| **Insertar registro (INSERT)**        | insert(Cliente).values(nombre="Lucía", edad=29)                                    | INSERT INTO cliente (nombre, edad) VALUES ('Lucía', 29);                                                                    |
| **Actualizar registro (UPDATE)**      | update(Cliente).where(Cliente.id == 1).values(edad=35)                             | UPDATE cliente SET edad = 35 WHERE id = 1;                                                                                  |
| **Eliminar registro (DELETE)**        | delete(Cliente).where(Cliente.id == 3)                                             | DELETE FROM cliente WHERE id = 3;                                                                                           |
| **Subconsulta (Subquery)**            | subq = select(func.avg(Factura.total)).subquery()                                  | SELECT (SELECT AVG(total) FROM factura) AS avg_total;                                                                       |
| **Ejecutar consulta y obtener todos** | session.scalars(select(Cliente)).all()                                             | SELECT * FROM cliente;                                                                                                      |
| **Obtener primer resultado**          | session.scalar(select(Cliente))                                                    | SELECT * FROM cliente LIMIT 1;                                                                                              |
| **Obtener primer registro (first)**   | session.execute(select(Cliente)).first()                                           | SELECT * FROM cliente LIMIT 1;                                                                                              |
| **Obtener un único registro (one)**   | session.execute(select(Cliente).where(Cliente.id==1)).one()                        | SELECT * FROM cliente WHERE id = 1;                                                                                         |
| **Obtener un valor escalar (scalar)** | session.scalar(select(func.count(Cliente.id)))                                     | SELECT COUNT(id) FROM cliente;                                                                                              |
| **Consulta SQL nativa (raw SQL)**     | session.execute(text("SELECT * FROM cliente WHERE edad > :edad"), {'edad': 25})    | SELECT * FROM cliente WHERE edad > 25;                                                                                      |
